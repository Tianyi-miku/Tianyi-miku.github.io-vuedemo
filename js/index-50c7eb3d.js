import{r as e,_ as a,by as s,bz as l,bA as t,Y as n,q as i,w as r,o,D as u,B as d,b as c,z as v,C as m,y as f,H as p,a as I,ae as b,W as g,a6 as k,aJ as y,bg as S,bh as h,bB as T,aE as _,au as w}from"./vendors-a4d7b1d1.js";import j from"./BaseSetting-52535902.js";import{p as A,f as B,u as O,a as D}from"./service-bd0cb98b.js";import x from"./UploadAvatar-7316ea99.js";import{d as z,c as K}from"./index-5b5a7675.js";import"./SelectSkillAndInterst-2425dc2a.js";import"./AddNewTag-a1e2d997.js";import"./index-525c358d.js";import"./Tag-421c683c.js";const U={class:"page-header-index-wide page-header-wrapper-grid-content-main"},C={class:"account-center-avatarHolder"},L={class:"username"},N={class:"bio"},$={class:"account-center-detail"},H={class:"account-center-tags"},q={class:"tagsTitle"},E={class:"tagsTitle",style:{"margin-top":"10px"}},J={class:"account-center-team"},M={class:"teamTitle"},P={class:"members"},W={class:"member"},Y={class:"member"},F={class:"member"};var G=a({components:{BaseSetting:j,UploadAvatar:x,UserAddOutlined:s,SmileOutlined:l,IdcardOutlined:t},setup(){const{t:a}=n.useI18n(),s=[{key:"baseInfo",tab:a("account.baseInfo")}];let l=e({});const t=e(!1),r=e([]),o=e([]),u=e(!1),d=async a=>{t.value=!0;const s=await(async a=>{var s;let l={};const t=e(!0),n=await A();l=n,l.skills=z(n.skills),l.mySkills=z(n.mySkills),l.interest=z(n.interest),l.myInterest=z(n.myInterest);let i=[],r=[];if(!(null==(s=n.skills)?void 0:s.length)||a){const e=await B();i=z(e[0].skill),r=z(e[0].hobby)}return t.value=!1,{loading:t,allSkills:i,allInterest:r,userInfo:l}})(a);a&&(r.value=s.allSkills,o.value=s.allInterest),l.value=s.userInfo,t.value=!1,u.value=!0};i((()=>{d(!0)}));const{createMessage:c}=D();return{userInfo:l,setavatar:async e=>{l.value.avatar=e,t.value=!0;await O({id:l.value.id,avatar:e})&&c.success(a("common.uploadSuccess")),t.value=!1},handleTabChange:(e,a)=>{},tabListNoTitle:s,noTitleKey:"baseInfo",allSkills:r,allInterest:o,showBaseSetting:u,onSaveBaseSetting:async e=>{if(!e.skills.length)return void c.error(a("account.needSkills"));t.value=!0;await O({skills:e.skills.join(K),mySkills:e.mySkills.join(K),interest:e.interest.join(K),myInterest:e.myInterest.join(K),avatar:l.value.avatar,id:l.value.id,nickname:e.nickname,bio:e.bio})&&(c.success("保存成功"),d(!1)),t.value=!1},loading:t}}},[["render",function(e,a,s,l,t,n){const i=r("UploadAvatar"),j=r("UserAddOutlined"),A=r("SmileOutlined"),B=r("IdcardOutlined"),O=k,D=w,x=y,z=S,K=h,G=T,Q=r("BaseSetting"),R=_;return o(),u(R,{spinning:l.loading},{default:d((()=>[c("div",U,[v(K,{gutter:24},{default:d((()=>[v(z,{md:24,lg:7},{default:d((()=>[v(G,{bordered:!1},{default:d((()=>[c("div",C,[l.showBaseSetting?(o(),u(i,{key:0,onOk:l.setavatar,defaultAvatar:l.userInfo.avatar},null,8,["onOk","defaultAvatar"])):m("",!0),c("div",L,f(l.userInfo.adAccount),1),c("div",N,f(l.userInfo.bio),1)]),c("div",$,[c("p",null,[v(j),p(f(l.userInfo.chineseName),1)]),c("p",null,[v(A),p(f(l.userInfo.nickname),1)]),c("p",null,[v(B),p(f(l.userInfo.empPosition),1)])]),v(O),c("div",H,[c("div",q,f(e.$t("account.skills")),1),c("div",null,[(o(!0),I(g,null,b(l.userInfo.skills,(e=>(o(),u(D,{key:e},{default:d((()=>[p(f(e),1)])),_:2},1024)))),128)),(o(!0),I(g,null,b(l.userInfo.mySkills,(e=>(o(),u(D,{key:e},{default:d((()=>[p(f(e),1)])),_:2},1024)))),128))]),c("div",E,f(e.$t("account.interest")),1),c("div",null,[(o(!0),I(g,null,b(l.userInfo.interest,(e=>(o(),u(D,{key:e},{default:d((()=>[p(f(e),1)])),_:2},1024)))),128)),(o(!0),I(g,null,b(l.userInfo.myInterest,(e=>(o(),u(D,{key:e},{default:d((()=>[p(f(e),1)])),_:2},1024)))),128))])]),v(O,{dashed:!0}),c("div",J,[c("div",M,f(e.$t("account.team")),1),c("div",P,[v(K,null,{default:d((()=>[v(z,{span:12},{default:d((()=>[c("a",null,[v(x,{size:"small",src:"/account/levelOneDept.png"}),c("span",W,f(l.userInfo.levelOneDept),1)])])),_:1}),v(z,{span:12},{default:d((()=>[c("a",null,[v(x,{size:"small",src:"/account/levelTwoDept.png"}),c("span",Y,f(l.userInfo.levelTwoDept),1)])])),_:1}),v(z,{span:24},{default:d((()=>[c("a",null,[v(x,{size:"small",src:"/account/levelThreeDept.png"}),c("span",F,f(l.userInfo.levelThreeDept),1)])])),_:1})])),_:1})])])])),_:1})])),_:1}),v(z,{md:24,lg:17},{default:d((()=>[v(G,{style:{width:"100%"},bordered:!1,tabList:l.tabListNoTitle,activeTabKey:l.noTitleKey,onTabChange:a[0]||(a[0]=e=>l.handleTabChange(e,"noTitleKey"))},{default:d((()=>[l.showBaseSetting?(o(),u(Q,{key:0,userInfo:l.userInfo,allSkills:l.allSkills,allInterest:l.allInterest,onSave:l.onSaveBaseSetting},null,8,["userInfo","allSkills","allInterest","onSave"])):m("",!0)])),_:1},8,["tabList","activeTabKey"])])),_:1})])),_:1})])])),_:1},8,["spinning"])}],["__scopeId","data-v-aeaa1f72"]]);export{G as default};
