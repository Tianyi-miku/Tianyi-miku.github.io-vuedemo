!function(){var e=document.createElement("style");e.innerHTML=".avatar-upload-preview[data-v-34404592]{position:absolute;top:50%;transform:translate(50%,-50%);width:180px;height:180px;border-radius:50%;box-shadow:0 0 4px #ccc;overflow:hidden}.avatar-upload-preview img[data-v-34404592]{width:100%;height:100%}.ant-upload-preview[data-v-34404592]{position:relative;margin:0 auto 10px;width:100%;max-width:130px;border-radius:50%;box-shadow:0 0 4px #ccc}.ant-upload-preview .upload-icon[data-v-34404592]{position:absolute;top:0;right:10px;font-size:1.4rem;padding:.5rem;background:rgba(222,221,221,.7);border-radius:50%;border:1px solid rgba(0,0,0,.2)}.ant-upload-preview .mask[data-v-34404592]{opacity:0;position:absolute;background:rgba(0,0,0,.4);cursor:pointer;transition:opacity .4s}.ant-upload-preview .mask[data-v-34404592]:hover{opacity:1}.ant-upload-preview .mask i[data-v-34404592]{font-size:2rem;position:absolute;top:50%;left:50%;margin-left:-1rem;margin-top:-1rem;color:#d6d6d6}.ant-upload-preview img[data-v-34404592],.ant-upload-preview .mask[data-v-34404592]{width:100%;max-width:180px;height:100%;border-radius:50%;overflow:hidden}@font-size - base: 14px;@text-color - secondary: rgba(0,0,0,.45);@border-radius - base: 2px;@border-color - base: #d9d9d9;@box-shadow - base: 0 2px 8px rgba(0,0,0,.15);\n",document.head.appendChild(e),System.register(["./vendors-legacy-275ef23f.js","./index-legacy-df869ea2.js"],(function(e){"use strict";var o,a,t,i,r,d,l,n,s,p,u,c,f,h,m,g,v,b,w,x,C;return{setters:[function(e){o=e.bC,a=e.bD,t=e.bE,i=e._,r=e.w,d=e.o,l=e.a,n=e.b,s=e.z,p=e.B,u=e.n,c=e.H,f=e.bg,h=e.bh,m=e.I,g=e.K,v=e.aF,b=e.N,w=e.O},function(e){x=e.f,C=e.h}],execute:function(){var k={props:["defaultAvatar"],components:{CloudUploadOutlined:o,PlusOutlined:a,VueCropper:t},data(){return{visible:!1,id:null,confirmLoading:!1,fileList:[],uploading:!1,options:{img:this.defaultAvatar||"/DNAPic/avatar.jpg",upLoadedAvatar:this.defaultAvatar||"/DNAPic/avatar.jpg",info:!0,size:1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:180,autoCropHeight:180,fixedBox:!0,fixed:!0,fixedNumber:[1,1]},previews:{}}},methods:{edit(e){this.visible=!0,this.id=e},close(){this.id=null,this.visible=!1},cancelHandel(){this.close()},changeScale(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft(){this.$refs.cropper.rotateLeft()},rotateRight(){this.$refs.cropper.rotateRight()},beforeUpload(e){const o=new FileReader;return o.readAsDataURL(e),o.onload=()=>{this.options.img=o.result},!1},finish(e){const o=this,a=new FormData;"blob"===e?this.$refs.cropper.getCropBlob((e=>{const t=window.URL.createObjectURL(e);this.model=!0,this.modelSrc=t;const i=new window.File([e],"avatar.jpg",{type:e.type});a.append("file",i),x.post(C+"api/v1/file/upload",a).then((e=>{this.options.upLoadedAvatar=e,o.$emit("ok",e),o.visible=!1}))})):this.$refs.cropper.getCropData((e=>{this.model=!0,this.modelSrc=e}))},okHandel(){const e=this;e.confirmLoading=!0,setTimeout((()=>{e.confirmLoading=!1,e.close(),e.$message.success("上传头像成功")}),2e3)},realTime(e){this.previews=e}}};const L={class:"mask"},_=["src"],y={class:"avatar-upload-preview"},U=["src"],A=(e=>(b("data-v-34404592"),e=e(),w(),e))((()=>n("br",null,null,-1)));e("default",i(k,[["render",function(e,o,a,t,i,b){const w=r("CloudUploadOutlined"),x=r("PlusOutlined"),C=r("vue-cropper"),k=f,H=h,R=m,S=g,j=v;return d(),l("section",null,[n("div",{class:"ant-upload-preview",onClick:o[0]||(o[0]=e=>b.edit(1))},[s(w,{class:"upload-icon"}),n("div",L,[s(x)]),n("img",{src:i.options.upLoadedAvatar},null,8,_)]),s(j,{title:"修改头像",visible:i.visible,maskClosable:!1,confirmLoading:i.confirmLoading,width:800,footer:null,onCancel:b.cancelHandel},{default:p((()=>[s(H,null,{default:p((()=>[s(k,{xs:24,md:12,style:{height:"350px"}},{default:p((()=>[s(C,{ref:"cropper",img:i.options.img,info:!0,autoCrop:i.options.autoCrop,autoCropWidth:i.options.autoCropWidth,autoCropHeight:i.options.autoCropHeight,fixedBox:i.options.fixedBox,onRealTime:b.realTime},null,8,["img","autoCrop","autoCropWidth","autoCropHeight","fixedBox","onRealTime"])])),_:1}),s(k,{xs:24,md:12,style:{height:"350px"}},{default:p((()=>[n("div",y,[n("img",{src:i.previews.url,style:u(i.previews.img)},null,12,U)])])),_:1})])),_:1}),A,s(H,null,{default:p((()=>[s(k,{lg:2,md:2},{default:p((()=>[s(S,{name:"file",beforeUpload:b.beforeUpload,showUploadList:!1},{default:p((()=>[s(R,{icon:"upload"},{default:p((()=>[c("选择图片")])),_:1})])),_:1},8,["beforeUpload"])])),_:1}),s(k,{lg:{span:1,offset:2},md:2},{default:p((()=>[s(R,{icon:"plus",onClick:o[1]||(o[1]=e=>b.changeScale(1))})])),_:1}),s(k,{lg:{span:1,offset:1},md:2},{default:p((()=>[s(R,{icon:"minus",onClick:o[2]||(o[2]=e=>b.changeScale(-1))})])),_:1}),s(k,{lg:{span:1,offset:1},md:2},{default:p((()=>[s(R,{icon:"undo",onClick:b.rotateLeft},null,8,["onClick"])])),_:1}),s(k,{lg:{span:1,offset:1},md:2},{default:p((()=>[s(R,{icon:"redo",onClick:b.rotateRight},null,8,["onClick"])])),_:1}),s(k,{lg:{span:2,offset:6},md:2},{default:p((()=>[s(R,{type:"primary",onClick:o[3]||(o[3]=e=>b.finish("blob"))},{default:p((()=>[c("保存")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible","confirmLoading","onCancel"])])}],["__scopeId","data-v-34404592"]]))}}}))}();
